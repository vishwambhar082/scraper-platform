sources:
  alfabeta:
    defaults:
      engine_type: http
      engine_config:
        timeout: 20
        max_retries: 3
    pipeline:
      - name: http_fetch
        config:
          # url can be provided dynamically via ctx.request
          # url: "https://example.com"
      - name: html_parse
        config:
          selectors:
            list: "table#products tbody tr"
            fields:
              product_name:
                css: "td.name"
              manufacturer:
                css: "td.mfr"
              strength:
                css: "td.strength"
              pack_size:
                css: "td.pack"
              price:
                css: "td.price"
      - name: llm_normalizer
        config:
          model: "gpt-4.1-mini"
          system_prompt: "Normalize drug strength and pack."
      - name: qc_rules
      - name: pcid_match
        config:
          master_records: []
          attach_to_records: true
      - name: db_export
        config:
          table: "alfabeta_products"
